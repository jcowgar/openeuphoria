SubDir TOP ;

BUILD_DIR = jambuild ;

PCRE_SOURCES = [ Glob pcre : *.c ] ;
EU_LIB_SOURCE = be_decompress.c be_machine.c be_w.c be_alloc.c be_inline.c be_runtime.c
    be_task.c be_callc.c be_socket.c be_pcre.c be_rev.c ;
EU_BACKEND_SOURCE = $(EU_LIB_SOURCE) be_magic.c be_execute.c be_main.c be_rterror.c
    be_syncolor.c be_symtab.c ;

RevGet be_rev.c ;
MagicGet be_magic.c ;

LOCATE_TARGET = [ FDirName $(TOP) $(BUILD_DIR) ] ;
SEARCH_SOURCE += [ FDirName $(TOP) pcre ] ;
Library eu : $(EU_BACKEND_SOURCE) $(PCRE_SOURCES:BS) ;

SEARCH_SOURCE = [ FDirName $(TOP) .. include ] ;

EuMain eui : eu.ex ;
EUCFLAGS on eui = -silent -con ;

EuMain euc : ec.ex ;
EUCFLAGS on euc = -silent -con ;

EuMain eutest : eutest.ex ;
EUCFLAGS on eutest = -silent -con ;
